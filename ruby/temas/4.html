<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cargar código desde GitHub (Prism.js)</title>
    <!-- Tema de GitHub para Prism -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-ghcolors.min.css" rel="stylesheet" />
    <!-- Prism JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <!-- Componente para Ruby -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-ruby.min.js"></script>
    <!-- Estilos para el botón de copiar y el nombre del archivo -->
    <style>
        .code-container {
            position: relative;
            margin-bottom: 20px;
        }
        .copy-button {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            font-size: 12px;
        }
        .copy-button:active {
            background-color: #0056b3;
        }
        .file-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <h1>Atributos</h1>
    <p>Definen la forma de los objetos de la clase.</p>
    <p>Empiezan con @</p>

    <!-- Nombre del archivo de código -->
    <div id="nombre-archivo" class="file-name"></div>

    <!-- Contenedor para el bloque de código y el botón de copiar -->
    <div class="code-container">
        <button class="copy-button" onclick="copiarCodigo()">Copiar</button>
        <pre><code id="codigo-github" class="language-ruby">Cargando...</code></pre>
    </div>

    <!-- JavaScript para cargar el archivo de GitHub y habilitar el botón de copiar -->
    <script>
        // URL cruda del archivo de GitHub
        const archivoGitHub = '4.rb';

        // Función para extraer el nombre del archivo de la URL
        function obtenerNombreArchivo(url) {
            const partesUrl = url.split('/');
            return partesUrl[partesUrl.length - 1]; // Último segmento de la URL es el nombre del archivo
        }

        // Mostrar el nombre del archivo
        const nombreArchivo = obtenerNombreArchivo(archivoGitHub);
        document.getElementById('nombre-archivo').textContent = `${nombreArchivo}`;

        // Función para cargar y mostrar el contenido del archivo de GitHub
        fetch(archivoGitHub)
            .then(response => response.text())
            .then(data => {
                // Insertar el código en el contenedor
                document.getElementById('codigo-github').textContent = data;

                // Reprocesar el bloque de código para resaltarlo con Prism
                Prism.highlightAll();
            })
            .catch(error => {
                console.error('Error al cargar el archivo:', error);
                document.getElementById('codigo-github').textContent = 'Error al cargar el código.';
            });

        // Función para copiar el contenido del código
        function copiarCodigo() {
            // Seleccionar el código dentro del bloque
            const codigo = document.getElementById('codigo-github').textContent;
            // Crear un área de texto temporal para copiar el texto
            const textArea = document.createElement('textarea');
            textArea.value = codigo;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            // Cambiar el texto del botón temporalmente
            const button = document.querySelector('.copy-button');
            button.textContent = 'Copiado';
            setTimeout(() => button.textContent = 'Copiar', 2000);
        }
    </script>

</body>
</html>
